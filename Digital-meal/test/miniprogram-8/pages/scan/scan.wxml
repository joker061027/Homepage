<view class="container">
  <view class="scan-btn">
    <button 
      type="primary" 
      bindtap="scanCode"
      loading="{{loading}}"
      disabled="{{loading}}"
    >扫描餐票二维码</button>
  </view>
  
  <view wx:if="{{result}}" class="result">
    <view class="result-title">扫描结果</view>
    <view class="result-item">有效性: 
      <text class="{{result.valid ? 'valid' : 'invalid'}}">
        {{result.valid ? '有效' : '无效'}}
      </text>
    </view>
    <view class="result-item">状态: {{result.message}}</view>
    
    <view wx:if="{{result.ticket}}" class="ticket-info">
      <view class="result-item">编号: {{result.ticket.code}}</view>
      <view class="result-item">过期时间: {{formatDate(result.ticket.expireTime)}}</view>
    </view>
    
    <view wx:if="{{result.valid && !result.ticketUsed}}" class="use-btn">
      <button 
        type="primary" 
        bindtap="useTicket"
        loading="{{loading}}"
        disabled="{{loading}}"
      >使用餐票</button>
    </view>
  </view>
</view>